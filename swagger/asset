# Project: Mint
# Module: Campaign UI Service
# Version: 1.0
# Be aware that YAML has indentation based scoping.
swagger: '2.0'
# Document metadata
info:
  description: |
    Project: Mint
    
    Module: Business Service Asset Service
    
    This is the API Specification for Business Service Asset
    
    [: https://newwiki.channel4.com/display/PM/Custom+Programme+Group)  ]
  version: "1.0.0"
  title: Business Service Asset Service
  contact:
    name: ankur-s@hcl.com
schemes: 
  - http
consumes:
  - application/json
produces:
  - application/json
  
# Describe API paths here
paths:
  # This is a path endpoint.
            
 /customProgrammeGroups/{cpgId}/programmeItems:
  get:
      summary: Retrieves the programme items associated a given custome programe group based on the path parameter cpgId
      description: Retrieves the programme items associated a given custome programe group based on the path parameter cpgId 
      parameters:
        - in: path
          name: cpgId
          description: cpgId 
          required: true
          type: number
          format: int64
      responses:
        "200":
          description: successful operation
          schema:
              $ref: "#/definitions/ProgrammeItems"
        "404":
          description: Programme items data not found
        default:
          description: Error
          schema:
            $ref: '#/definitions/Error' 
            
 /customProgrammeGroups/{cpgId}:
  get:
      summary: Retrieves the CPG details based on the given cpgId. 
      description: Retrieves the CPG details based on the given cpgId. 
      parameters:
        - in: path
          name: cpgId
          description: cpgId 
          required: true
          type: number
          format: int64
      responses:
        "200":
          description: successful operation
          schema:
              $ref: "#/definitions/CustomProgrammeGroupDetails"
        "404":
          description: CPG data not found
        default:
          description: Error
          schema:
            $ref: '#/definitions/Error' 
  put:
      summary: Updates customProgrammeGroups
      description: Updates customProgrammeGroups
      parameters:
        - in: path
          name: cpgId
          required: true
          type: string
        - name: customProgrammeGroup
          in: body
          schema:
           $ref: '#/definitions/CustomProgrammeGroupForAmend'
       
      responses:
        "400":
          description: Invalid Parameters
          schema:
            $ref: '#/definitions/Error'
        "404":
          description: Could not find CPG with ID {cpgId}
          schema:
            $ref: '#/definitions/Error'
        "409":
          description: CPG already exists
          schema:
            $ref: '#/definitions/Error'
        "200":
          description: successful operation
          schema:
            $ref: "#/definitions/CustomProgrammeGroupId"
        "500":
          description: Could not update 
          schema:
            $ref: '#/definitions/Error'            
 
     
 
 /asset/programmeItems:
  get:
      summary: Retrieves the list of programme items based on the the query parameters named itemType, name or code.
      description: Retrieves the list of programme items based on the the query parameters named itemType, name or code. 
      parameters:
        - in: query
          name: itemType
          description: itemType 
          required: true
          type: string
        - in: query
          name: code
          description: code 
          required: true
          type: string
        - in: query
          name: name
          description: name 
          required: true
          type: string
      responses:
        "200":
          description: successful operation
          schema:
             $ref: "#/definitions/ProgrammeItems"
        "404":
          description: programmeItems data not found
        default:
          description: Error
          schema:
            $ref: '#/definitions/Error' 
 
 /asset/programmeItems/{externalId}:
  get:
      summary: Retrieves the details of a Programme item based on its externalId which we have in Mint. 
      description: Retrieves the details of a Programme item based on its externalId which we have in Mint. 
      parameters:
        - in: path
          name: externalId
          description: externalId 
          required: true
          type: number
          format: int64
      responses:
        "200":
          description: successful operation
          schema:
              $ref: "#/definitions/ProgrammeItemDetails"
        "404":
          description: Data not found
        "500":
          description: Internal Server Error
        default:
          description: Error
          schema:
            $ref: '#/definitions/Error'  
  
    
            
################################################################################
#                               Definitions                                    #
################################################################################  
definitions:
################################################################################
#                             Request  Definitions                             #
################################################################################

 ProgrammeItemDetails:
  type: object
  properties:
    externalId:
     type: string
    code:
     type: string
    name:
     type: string
 
 ProgrammeItem:
  type: object
  properties:
    id:
     type: integer
     format: integer32
    itemTypeId:
     type: integer
     format: integer32
    itemType:
     type: string
    externalId:
     type: string
    code:
     type: string
    name:
     type: string
 
 ProgrammeItems:
   type: array
   items:
     $ref: '#/definitions/ProgrammeItem'
     
 CustomProgrammeGroup:
   type: object
   properties:
      id:
       type: integer
       format: integer32
      name:
       type: string
      code:
       type: string
      isProductRestricted:
       type: string
      statusId:
       type: string
      status:
       type: string
      programmeItems:
        type: array
        items:
          $ref: '#/definitions/ProgrammeItem'
     
       
 CustomProgrammeGroupDetails:
   type: object
   properties:
     customProgrammeGroups:
        type: array
        items:
          $ref: '#/definitions/CustomProgrammeGroup'
     programmeItems:
        type: array
        items:
          $ref: '#/definitions/ProgrammeItem'
          
          
 CustomProgrammeGroupForAmend:
   type: object
   properties:
      id:
       type: integer
       format: integer32
      code:
       type: string
      name:
       type: string
      isProductRestricted:
       type: string
      statusId:
       type: string
      programmeItems:
        $ref: '#/definitions/ProgrammeItemsForAmend'       
        
 ProgrammeItemsForAmend:
    type: array
    items:
      $ref: "#/definitions/ProgrammeItemForAmend"
      
 ProgrammeItemForAmend:
  type: object
  properties:
    id:
     type: integer
     format: integer32
    itemTypeId:
     type: integer
     format: integer32
    externalId:
     type: string
    isAdded:
     type: boolean
    isDeleted:
     type: boolean        
     
##############################################################################
#                             Response  Definitions                         
#
################################################################################      
     
 CustomProgrammeGroupId:
   required:
   - id
   type: object
   properties:
    id:
      type: string
     
################################################################################
#                             Error / Fault  Definitions                       #
################################################################################  
 Error:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
      fields:
        type: string